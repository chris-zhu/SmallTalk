let e=document.createElement("style");e.innerHTML=".login[data-v-0a933d5f]{width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;user-select:none}.login .wrapper[data-v-0a933d5f]{transition:.35s}.login .wrapper .desc[data-v-0a933d5f],.login .wrapper .msg[data-v-0a933d5f],.login .wrapper .title[data-v-0a933d5f]{text-align:center}.login .wrapper .desc[data-v-0a933d5f]{margin-bottom:20px}.login .wrapper .desc[data-v-0a933d5f],.login .wrapper .msg[data-v-0a933d5f]{font-size:1.5rem}.login .wrapper .btns[data-v-0a933d5f]{display:flex;align-items:center;justify-content:space-between}.login .wrapper .btns .exchange[data-v-0a933d5f]{padding:.4rem 1.3rem;font-size:1.5rem}@media (max-width:1199px){.wrapper[data-v-0a933d5f]{width:85vw}}@media (min-width:1200px){.wrapper[data-v-0a933d5f]{width:320px}}",document.head.appendChild(e);import{a,m as t,Q as n,R as o,O as r,U as s,j as d,d as l,V as i,k as c,u as m,W as p,r as u,o as f,c as g,T as v,t as h,X as w,w as b,p as y,l as S,b as x}from"./index.ad8ba5b8.js";import{I as C}from"./AntdIcon.29faaa20.js";import{t as I}from"./index.36ed2e6b.js";var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"};function O(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var _=function(e,n){var o=function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(a){O(e,a,t[a])}))}return e}({},e,n.attrs);return a(C,t(o,{icon:k}),null)};_.displayName="SwapOutlined",_.inheritAttrs=!1;var j={name:"login",components:{SwapOutlined:_},setup(){n(),o(()=>{sessionStorage.removeItem("smsCode")});const e=m(),{form:a,loading:t,handleTypeChange:u,handleSubmit:f}=function(){const e=l({form:{phone:"",pwd:"",remember:!0,code:"",type:"I"},loading:!1});return{...r(e),handleTypeChange:()=>{e.form.type="I"===e.form.type?"II":"I"},handleSubmit:a=>{e.loading=!0;if(!/^(13[0-9]|14[01456879]|15[0-3,5-9]|16[2567]|17[0-8]|18[0-9]|19[0-3,5-9])\d{8}$/.test(e.form.phone))return i.error("请输入正确的手机号"),void(e.loading=!1);if("I"===e.form.type){if(!e.form.code)return e.loading=!1,void i.error("请输入验证码");if(e.form.code!==sessionStorage.getItem("smsCode"))return e.loading=!1,void i.error("请输入正确的验证码")}else if(!e.form.pwd)return e.loading=!1,void i.error("请输入密码");a(c(e.form)).then(()=>{e.loading=!1}).catch(a=>{console.log(a),e.loading=!1})}}}(),g=s(a.value,"phone"),{getSmsCode:v,codeBtnText:h}=function(e,a){const t=d(e),n=d("Get Smscode");return{getSmsCode:I(()=>{n.value=`Get Smscode( ${t.value}s )`;let a=setInterval(()=>{t.value--,t.value>0?n.value=`Get Smscode( ${t.value}s )`:(n.value="Get Smscode",t.value=e,clearInterval(a),a=null)},1e3);p.sendSms().then(e=>{sessionStorage.setItem("smsCode",e.data.code),setTimeout(()=>{sessionStorage.removeItem("smsCode")},12e4),i.info(e.data.text,5)})},1e3*e),codeBtnText:n}}(30),w=async a=>e.dispatch("user/login",a);return{form:a,phone:g,Submit:()=>{f(w)},loading:t,handleTypeChange:u,codeBtnText:h,getSmsCode:v}}};const T=b("data-v-0a933d5f");y("data-v-0a933d5f");const E={class:"login"},P={class:"wrapper"},B=a("h1",{class:"title gradient-text"},"Sign in",-1),U=a("p",{class:"desc gradient-text"},"Welcome to the SmallTalk web-client.",-1),z={class:"gradient-text"},G={class:"btns"},A=S(" Remember me "),H=S("Sign in "),L=a("p",{class:"msg"},"© 2020 Chris. All rights reserved.",-1);x();const M=T((function(e,t,n,o,r,s){const d=u("a-input"),l=u("a-form-item"),i=u("a-input-password"),c=u("a-button"),m=u("a-checkbox"),p=u("SwapOutlined"),b=u("a-form");return f(),g("div",E,[a("div",P,[B,U,a(b,{layout:"vertical"},{default:T(()=>[a(l,null,{default:T(()=>[a(d,{class:"f-input",maxlength:11,value:o.phone,"onUpdate:value":t[1]||(t[1]=e=>o.phone=e),placeholder:"Enter your phone +86"},null,8,["value"])]),_:1}),a(v,{name:"fade",mode:"out-in"},{default:T(()=>["II"===o.form.type?(f(),g(l,{key:"pwd"},{default:T(()=>[a(i,{class:"f-pwd",onPressEnter:o.Submit,value:o.form.pwd,"onUpdate:value":t[2]||(t[2]=e=>o.form.pwd=e),placeholder:"Enter your password"},null,8,["onPressEnter","value"])]),_:1})):(f(),g(l,{key:"code"},{default:T(()=>[a(d,{class:"f-smsCode",maxlength:4,onPressEnter:o.Submit,placeholder:"Enter your smscode",value:o.form.code,"onUpdate:value":t[3]||(t[3]=e=>o.form.code=e)},{suffix:T(()=>[a(c,{onClick:o.getSmsCode},{default:T(()=>[a("span",z,h(o.codeBtnText),1)]),_:1},8,["onClick"])]),_:1},8,["onPressEnter","value"])]),_:1}))]),_:1}),a(l,null,{default:T(()=>[a("div",G,[a(m,{checked:o.form.remember,"onUpdate:checked":t[4]||(t[4]=e=>o.form.remember=e)},{default:T(()=>[A]),_:1},8,["checked"]),a("div",{onClick:t[5]||(t[5]=(...e)=>o.handleTypeChange(...e)),class:"exchange"},[a(p)])])]),_:1}),a(l,null,{default:T(()=>[a(c,{loading:o.loading,onClick:w(o.Submit,["prevent"]),class:"gradient-button",block:""},{default:T(()=>[H]),_:1},8,["loading","onClick"])]),_:1})]),_:1}),L])])}));j.render=M,j.__scopeId="data-v-0a933d5f";export default j;
